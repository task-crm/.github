## Pull request

1. При создании Pull Request в поле "description" необходимо указать дополнительную информацию для ревьюеров; 
2. Ссылку на PR присылаем в discord в канал "PR-reviews" и тегаем людей которым нужно провести ревью; 
3. На каждую таску и комментарий в PR нужно отписаться, например: "Исправил", "На мой взгляд, это не нужно потому что ...".
4. Ваш ответ помогает ревьюеру понять, совершены ли какие-то работы или нет.; 
5. После исправления всех замечаний, уведомляем ревьюеров об этом в личку, либо в тот-же чат discord; 
6. После merge обязательно удаляем ветку; 
7. В PR можно ставить 2 вида сообщений: \
7.1. Комментарий - ревьюер пишет если не уверен, что это нужно исправлять, либо если холиварный момент.
Разработчик, запостивший PR сам решает нужно ли исправлять комментарий или нет. \
7.2. Задача(с галочкой) - ревьюер пишет если уверен, что это нужно исправлять. 
Разработчик, открывший PR обязан отреагировать на задачу - исправить или отписать ответный комментарий с пояснением.\
7.2.1. Закрывает задачу (ставит галочку): \
Тот, кто её создал. \
Автор PR в случае если ревьюер создавший задачу нажал "Approve". 
В этом случае предварительно нужно исправить задачу и затем самостоятельно прожать ее. \

8. Любое Code Review заканчивается двумя путям: \
8.1 Need works \
8.2 Approve \
Если ничего из этого не стоит, значит разработчик может игнорировать комментарии и считать что Code Review со стороны ревьюера не закончено. 
9. Пирамида ревью кода. "Focus your review efforts
   here!" ![](https://www.morling.dev/images/code_review_pyramid.svg )
***
## API

1. Сервисы общаются друг с другом по HTTP и gRPC.
2. [Там где возможно мы придерживаемся REST подхода к проектированию API](https://docs.microsoft.com/ru-ru/azure/architecture/best-practices/api-design)
3. Для получения списка объектов можно и приветствуется использовать POST запрос и передавать в качестве фильтра json объект.
4. В API нельзя использовать enum классы. Нужно заменять их на String или другие типы.
5. В API нельзя использовать непагинированное API!
6. Аннотация @RequestMapping не используется на уровне интерфейсов или классов

***
## Библиотеки, сервисы и репозитории

1. Название всех репозиториев начинается с префикса crm-*. Например crm-date-lib.
2. Если сервис касается кастомного on premise решения, то в префикс добавляется название клиента или системы клиента 
для которого пишется кастомизация. Например crm-magnet-import-service.
3. В сервисы добавляется постфикс *-service. Например crm-order-service.
4. Все сервисы должны иметь структуру: \
4.1. crm-имя-проекта-service-api - api самого сервиса, если он предоставляет какой-то API для взаимодействия с собой \
4.2. crm-имя-проекта-service-db - опционально, если есть работа с БД \
4.3. crm-имя-проекта-service-impl - реализация логики работы сервиса 
5. библиотеки. В библиотеки добавляется постфикс *-lib. Например crm-date-lib.

***
## Стек и технологии
1. Языки программирования - Java(17 | 21), Kotlin, Go (1.21 +)
2. Checkstyle(в discord). Для применения переходим в настройки (на примере Intellij IDEA), Editor -> Codestyle, 
в блоке Scheme нажимаем на шестеренку -> Import scheme, выбираем сказанный файл и OK.
3. БД - PgSQL
4. Миграции БД - Liquibase
5. Сборка - maven
6. Основные фреймворки и библиотеки - Spring(boot, security, cloud etc.), JOOQ, R2DBC
7. Маппинг - MapStruct
8. Шина - Apache Kafka
***

## Стандарты кода

### Lombok

1. Используем любые аннотации из stable пакета.
2. На изменяемые Data классы вешаем следующие аннотации: @Data, @Builder(toBuilder = true), @NoArgsConstructor, @AllArgsConstructor. 
3. Используем не set, а builder.

### Идентификаторы в БД

1. В качестве идентификаторов(PRIMARY KEY) в БД используем строго UUID. По согласованию NATURAL KEY.

###  Spring

1. Используем ResponseEntity в крайних случаях.
2. Для обработки ошибок используем ExceptionHandler.

### Наименование 

```
class Apac {
private boolean enabled; //isEnabled - неправильно
}
```
```
private Map<String, Enum> enumByType; // enumMaps - неправильно. Правило valueByKey
private List<User> users; // userList - неправильно. Не привязываемся к реализации
```
```
private Optional<User> findUser; // getUser - неправильно
private User getUser; // findUser - неправильно
```
```
public User create(User user); // public User create(UserDto userDto); - неправильно
```
***
